<ul>
  <% item.children.each do |child| %>
    <li id='category_<%=child.id %>'>
      <%- item_list = @model_class.tagged_with([child.name]).paginate(:page => params[:page], :per_page => 10).order('id DESC')%>
      <span><%= child.name %>(<%= item_list.count%>)</span>
      <% if item_list.present? %>
        <a class="btn btn-mini" data-toggle="modal" href="#<%= child.id %>" >More info</a>
        <div class="modal hide" id="<%= child.id %>">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">Ã—</button>
            <h3>Tags as: <%= child.name %></h3>
          </div>
          <div class="modal-body">
            <%- model_class = @model_class unless @model_class.nil? -%>
            <%= render 'common/list_model', :model_class => (@model_class unless @model_class.nil?), :item_list => item_list  %>
          </div>
          <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">Close</a>
            <!--a href="#" class="btn btn-primary">Save changes</a-->
          </div>
        </div>
      <% end %>
      <%= render 'shared/children', :item => child unless child.leaf? %>
    </li>
  <% end -%>
</ul>
